"use strict";window.onload=(function(A){A.MaskedInput=function(e){if(!e||!e.elm||!e.format)return null;if(!(this instanceof A.MaskedInput))return new A.MaskedInput(e);var t=this,a=e.elm,u=e.format,c=e.allowed||"0123456789",o=e.allowedfx||function(){return!0},i=e.separator||"/:-",s=e.typeon||"_YMDhms",f=e.onbadkey||function(){},n=e.onfilled||function(){},r=e.badkeywait||0,l=!e.hasOwnProperty("preserve")||!!e.preserve,d=!0,v=!1,h=u,p=window.addEventListener?function(e,t,n,r){e.addEventListener(t,n,void 0!==r&&r)}:window.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=n},b=function(){for(var e=a.value.length-1;0<=e;e--)for(var t=0,n=s.length;t<n;t++)if(a.value[e]===s[t])return!1;return!0},k=function(e){try{return e.focus(),0<=e.selectionStart?e.selectionStart:document.selection?-document.selection.createRange().moveStart("character",-e.value.length):-1}catch(e){return-1}},m=function(e,t){try{if(e.selectionStart)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}}catch(e){return!1}return!0},w=function(e){var t="",n=(e=e||window.event).which,r=e.type;if(null==n&&(n=e.keyCode),null==n)return"";switch(n){case 8:t="bksp";break;case 46:t="keydown"===r?"del":".";break;case 16:t="shift";break;case 0:case 9:case 13:t="etc";break;case 37:case 38:case 39:case 40:t=e.shiftKey||39===e.charCode||void 0===e.charCode?String.fromCharCode(n):"etc";break;default:t=String.fromCharCode(n)}return t},y=function(e,t){e.preventDefault&&e.preventDefault(),e.returnValue=t||!1},g=function(e){var t=k(a),n=a.value,r="";switch(!0){case-1!==c.indexOf(e):if((t+=1)>u.length)return!1;for(;-1!==i.indexOf(n.charAt(t-1))&&t<=u.length;)t+=1;if(!o(e,t))return f(e),!1;r=n.substr(0,t-1)+e+n.substr(t),-1===c.indexOf(n.charAt(t))&&-1===s.indexOf(n.charAt(t))&&(t+=1);break;case"bksp"===e:if((t-=1)<0)return!1;for(;-1===c.indexOf(n.charAt(t))&&-1===s.indexOf(n.charAt(t))&&1<t;)t-=1;r=n.substr(0,t)+u.substr(t,1)+n.substr(t+1);break;case"del"===e:if(t>=n.length)return!1;for(;-1!==i.indexOf(n.charAt(t))&&""!==n.charAt(t);)t+=1;r=n.substr(0,t)+u.substr(t,1)+n.substr(t+1),t+=1;break;case"etc"===e:return!0;default:return!1}return a.value="",a.value=r,m(a,t),!1},x=function(e){if(!d)return!0;if(e=e||event,v)return y(e),!1;var t=w(e);return!!("etc"===t||e.metaKey||e.ctrlKey||e.altKey)||"bksp"!==t&&"del"!==t&&"shift"!==t&&(function(e){if(-1!==c.indexOf(e)||"bksp"===e||"del"===e||"etc"===e)return!0;var t=k(a);return v=!0,f(e),setTimeout(function(){v=!1,m(a,t)},r),!1}(t)?g(t)?(b()&&n(),y(e,!0),!0):(b()&&n(),y(e),!1):(y(e),!1))};return t.resetField=function(){a.value=u},t.setAllowed=function(e){c=e,t.resetField()},t.setFormat=function(e){u=e,t.resetField()},t.setSeparator=function(e){i=e,t.resetField()},t.setTypeon=function(e){s=e,t.resetField()},t.setEnabled=function(e){d=e},!a.tagName||"INPUT"!==a.tagName.toUpperCase()&&"TEXTAREA"!==a.tagName.toUpperCase()?null:(l&&""!==a.value||(a.value=u),p(a,"keydown",function(e){!function(e){if(d){if(e=e||event,v)return y(e);var t=w(e);!e.metaKey&&!e.ctrlKey||"X"!==t&&"V"!==t?e.metaKey||e.ctrlKey||(""===a.value&&(a.value=u,m(a,0)),"bksp"!==t&&"del"!==t||(g(t),y(e))):y(e)}}(e)}),p(a,"keypress",function(e){x(e)}),p(a,"focus",function(){h=a.value}),p(a,"blur",function(){a.value!==h&&a.onchange&&a.onchange()}),t)}}(window),void MaskedInput({elm:document.getElementById("phone"),format:"+380 (__) ___-__-__",separator:"+380 ()-"}));